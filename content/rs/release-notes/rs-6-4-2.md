---
Title: Redis Enterprise Software release notes 6.4.2 (February 2023)
linkTitle: 6.4.2 (February 2023)
description: Pub/sub ACLs & default permissions. Validate client certificates by subject attributes. Ubuntu 20.04 support.
compatibleOSSVersion: Redis 6.2.6
weight: 72
alwaysopen: false
categories: ["RS"]
aliases: [ /rs/release-notes/rs-6-4-2/,
           /rs/release-notes/rs-6-4-2.md,
           /rs/release-notes/rs-6-4-2,
           /rs/release-notes/rs-6-4-2.md ]
---

## 6.4.2-43 (March 2023)

This is a maintenance release for ​[​Redis Enterprise Software version 6.4.2](https://redis.com/redis-enterprise-software/download-center/software/).

The following table shows the MD5 checksums for the available packages:

| Package | MD5 checksum (6.4.2 March release) |
|---------|---------------------------------------|
| Ubuntu 16 | TBD |
| Ubuntu 18 | TBD |
| Ubuntu 20 | TBD |
| RedHat Enterprise Linux (RHEL) 7<br/>Oracle Enterprise Linux (OL) 7 | TBD |
| RedHat Enterprise Linux (RHEL) 8<br/>Oracle Enterprise Linux (OL) 8 <br/>Rocky Enterprise Linux | TBD |

### Features and enhancements

#### Support for Ubuntu 20

Added operating system support for Ubuntu 20.04.

#### Validate client certificates by subject attributes

- Added the ability to enter multiple `Organizational Unit (OU)` values to a certificate validation's subject entry. Subject validation only succeeds if all `OU` values match.

- Validation fails if the certificate’s subject contains an extra field which is missing from the certificate’s configured subject (empty field).

#### Safe node removal (RS92095)

As of this release, the node removal task waits for persistence files to be created on a new node before finishing removal. For more information, see [Remove a cluster node](https://docs.redis.com/latest/rs/clusters/remove-node/) and [`rladmin node remove`](https://docs.redis.com/latest/rs/references/cli-utilities/rladmin/node/remove/).

#### Allow port configuration for gossip_envoy service (RS72028) 

You can use the REST API to configure the `gossip_envoy_admin_port` during bootstrapping or runtime. See the [cluster object reference]({{<relref "/rs/references/rest-api/objects/cluster">}}) for more details.

Support for `rladmin` will be added in a future 6.4.2 maintenance release.

### Known operating system limitations

#### RHEL 7 and RHEL 8

RS95344 - CRDB database will not start on Redis Enterprise v6.4.2 with a custom installation path.

For a workaround, use the following commands to add the relevant CRDB files to the Redis library:

```sh
$ yum install -y chrpath
$ find $installdir -name "crdt.so" | xargs -n1 -I {} /bin/bash -c 'chrpath -r ${libdir} {}'
```

This limitation was fixed in Redis Enterprise v6.4.2-43 (March maintenance release).

#### Ubuntu 20.04

- By default, you cannot use the SHA1 hash algorithm ([OpenSSL’s default security level is set to 2](https://manpages.ubuntu.com/manpages/focal/man3/SSL_CTX_set_security_level.3ssl.html#notes)). The operating system will reject SHA1 certificates even if the `mtls_allow_weak_hashing` option is enabled. You need to replace SHA1 certificates with newer certificates that use SHA-256. Note that the certificates provided with Redis Enterprise Software use SHA-256.  

- RS95824 - Can't run `rl_rdbconvert` manually on Debian-based systems

### Redis modules 

Redis Enterprise Software v6.4.2 includes the new features delivered in the latest [Redis Stack release (v6.2.6)](https://redis.com/blog/introducing-redis-stack-6-2-6-and-7-0-6/ ):

- [RediSearch v2.6.4](https://docs.redis.com/latest/modules/redisearch/release-notes/redisearch-2.6-release-notes/#v264-december-2022)

- [RedisJSON v2.4.5](https://docs.redis.com/latest/modules/redisjson/release-notes/redisjson-2.4-release-notes/#v245-february-2023)

- [RedisBloom v2.4.3](https://docs.redis.com/latest/modules/redisbloom/release-notes/redisbloom-2.4-release-notes/#v24-ga-v243-november-2022)

- [RedisGraph v2.10.5](https://docs.redis.com/latest/modules/redisgraph/release-notes/redisgraph-2.10-release-notes/#v2105-december-2022)

- [RedisTimeSeries v1.8.5](https://docs.redis.com/latest/modules/redistimeseries/release-notes/redistimeseries-1.8-release-notes/#v185-january-2023)

### Resolved issues

- RS95344 - Fix custom installation linkage bug for files related to Active-Active

- RS91554 - Enhance visibility of `redis_mgr` 

- RS90496 - Improve cross-node communication to support failovers

- RS93004 - Allow positive `audit_port` configuration

- RS58918 - Reduce the number of blocked clients by blocking only clients requested to flush until completion. Other clients won’t be affected.

- RS85447 - When creating a database, the memory size is total memory for the database, not total dataset size. Therefore, if you enable replication and the database has two shards, each shard will have half of the allocated memory size.

- RS90556 -  `Heartbeatd` - upgrade [`sysinfo`](https://crates.io/crates/sysinfo) dependency 0.19.1 -> 0.27.7

- RS62552 - Fix database authentication failures for LDAP users when the password contains the `%` character

- RS93566 - Added [`rlcheck`](https://docs.redis.com/latest/rs/references/cli-utilities/rlcheck/) validation step to verify that all needed modules (modules used during the initial creation of any CRDBs on the cluster) are actually available on the cluster. In some cases, if a specific module version is required, the user will need to upload it in order to upgrade the cluster. After the upgrade is complete, you can delete the required module.


## 6.4.2 GA (6.4.2-30) (February 2023)

​[​Redis Enterprise Software version 6.4.2](https://redis.com/redis-enterprise-software/download-center/software/) is now available!


The following table shows the MD5 checksums for the available packages:

| Package | MD5 checksum (6.4.2 February release) |
|---------|---------------------------------------|
| Ubuntu 16 | b0dbecaa974ca08245dda55d53b6fe9b |
| Ubuntu 18 | a5192e8b0734db80d6b7c2b98a170c58 |
| RedHat Enterprise Linux (RHEL) 7<br/>Oracle Enterprise Linux (OL) 7 | c1537855dcfe7a7cedf9031ce01e2b9b |
| RedHat Enterprise Linux (RHEL) 8<br/>Oracle Enterprise Linux (OL) 8 <br/>Rocky Enterprise Linux | a24dc749d6dcb5df2162d7a41791c7aa |

This version offers:

- Extended validation of client certificates via mTLS (mutual TLS) full subject support

- Support for default restrictive permissions when using publish/subscribe commands and ACLs (access control lists)

- Enhanced TLS performance when Redis returns large arrays in responses

- Compatibility with [open source Redis 6.2.6](https://github.com/redis/redis)

- Additional enhancements and bug fixes

### Features and enhancements

#### Validate client certificates by subject attributes

You can now validate client certificates by their `Subject` attributes. When a client attempts to connect to a database, Redis Enterprise Software compares the values of the client certificate subject attributes to the subject values allowed by the database. Clients can connect to the database only if the subject values match. This gives more flexibility in controlling which clients can access which databases.

See [Enable TLS](https://docs.redis.com/latest/rs/security/tls/enable-tls/) for more information.


#### Default pub/sub ACL permissions

Redis is continuously enhancing its ACL (access control list) functionality and coverage. Redis version 6.2 enhances [ACLs](https://redis.io/docs/management/security/acl/) to allow and disallow pub/sub channels. 

Part of protecting pub/sub channels requires changing the default access from permissive to restrictive, which blocks all pub/sub channels unless specifically permitted by an ACL rule. To allow this transition across all databases in the cluster, Redis Enterprise Software 6.4.2 provides a new configuration option `acl-pubsub-default` that sets the cluster-wide default for all channels to either permitted or restricted.

The 6.4.2 installation-provided value of `acl-pubsub-default` is permissive (`allchannels`) to comply with earlier Redis versions. After you upgrade all databases in the cluster to Redis DB version 6.2 (or later in future versions), you can use `rladmin` or the REST API to change the value to restrictive (`resetchannels`).

To allow certain users to access specific pub/sub channels, define the appropriate ACL. Redis Enterprise Software 6.4.2 enhances the admin console (UI), CLI, and REST API to support pub/sub channel ACL definitions.

If you use ACLs and pub/sub channels, we recommend you review your databases and ACL settings and plan to change your cluster to restricted mode. This will help you prepare for future Redis Enterprise Software releases that use restrictive `resetchannels` as the new default for `acl-pubsub-default`.

### Version changes 

#### Breaking changes

- REST API: the `authorized_names` field of the [BDB object](https://docs.redis.com/latest/rs/references/rest-api/objects/bdb/) is deprecated. Use the new `authorized_subjects` field instead.

#### New default Redis DB version

Both Redis Enterprise Software versions 6.2.x and 6.4.x package two Redis DB versions: Redis DB 6.0 and Redis DB 6.2. Until now, the default Redis DB version for creating new databases and upgrading existing databases was 6.0 (enforced by the `redis_upgrade_policy` parameter).

To allow customers more flexibility in future upgrades, starting with Redis Enterprise Software 6.4.2, the default Redis DB version for new and upgraded databases is now 6.2 for all upgrade policies (`redis_upgrade_policy=major` and `redis_upgrade_policy=latest`). 

| Redis<br />Enterprise | Bundled Redis<br />DB versions | Default DB version<br />(upgraded/new databases) |
|-------|----------|-----|
| 6.2.x | 6.0, 6.2 | 6.0 |
| 6.4.2 | 6.0, 6.2 | 6.2 |

You can override the default version with [`rladmin`](https://docs.redis.com/latest/rs/references/cli-utilities/rladmin/tune/#tune-cluster); however, we recommend that you don't change this setting.

### Known operating system limitations

#### RHEL 7 and RHEL 8

If you have a custom installation with a non-default `$installdir` and use Active-Active or Redis on Flash features, failures might occur when you upgrade. This issue will be fixed in a future maintenance release. 

#### RHEL 8

Due to module binary differences between RHEL 7 and RHEL 8, you cannot upgrade RHEL 7 clusters to RHEL 8 when they host databases using modules. Instead, you need to create a new cluster on RHEL 8 and then migrate existing data from your RHEL 7 cluster. This does not apply to clusters that do not use modules.

### Deprecations

#### Ubuntu 16.04

Ubuntu 16 support is considered deprecated and will be removed in a future release. Ubuntu 16.04 LTS (Xenial) has reached the end of its free initial five-year security maintenance period as of April 30, 2021.

#### Active-Active database persistence

The snapshot option for Active-Active database persistence is deprecated. We advise customers running Active-Active databases, configured with snapshot data persistence, to reconfigure their data persistence mode to use the AOF (Append Only File) option with the following command:

```sh
crdb-cli crdb update --crdb-guid <CRDB_GUID> \
    --default-db-config '{"data_persistence": "aof", "aof_policy":"appendfsync-every-sec"}'
```

#### TLS 1.0 and TLS 1.1

TLS 1.0 and TLS 1.1 connections are considered deprecated in favor of TLS 1.2 or later.
Please verify that all clients, apps, and connections support TLS 1.2. Support for the earlier protocols will be removed in a future release.
Certain operating systems, such as RHEL 8, have already removed support for the earlier protocols. Redis Enterprise Software cannot support connection protocols that are not supported by the underlying operating system.

#### 3DES encryption cipher

The 3DES encryption cipher is considered deprecated in favor of stronger ciphers like AES.
Please verify that all clients, apps, and connections support the AES cipher. Support for 3DES will be removed in a future release.
Certain operating systems, such as RHEL 8, have already removed support for 3DES. Redis Enterprise Software cannot support cipher suites that are not supported by the underlying operating system.

### Redis modules 

Redis Enterprise Software v6.4.2 includes the following Redis modules:

- [RediSearch v2.4.16](https://docs.redis.com/latest/modules/redisearch/release-notes/redisearch-2.4-release-notes/#v2416-november-2022)

- [RedisJSON v2.2.0](https://docs.redis.com/latest/modules/redisjson/release-notes/redisjson-2.2-release-notes/#v220-july-2022)

- [RedisBloom v2.2.18](https://docs.redis.com/latest/modules/redisbloom/release-notes/redisbloom-2.2-release-notes/#v2218-july-2022)

- [RedisGraph v2.8.20](https://docs.redis.com/latest/modules/redisgraph/release-notes/redisgraph-2.8-release-notes/#v2820-september-2022)

- [RedisTimeSeries v1.6.17](https://docs.redis.com/latest/modules/redistimeseries/release-notes/redistimeseries-1.6-release-notes/#v1617-july-2022)

See [Upgrade modules](https://docs.redis.com/latest/modules/install/upgrade-module/) to learn how to upgrade a module for a database. 

### Additional enhancements

#### Installations, upgrades, and troubleshooting

- Added the ability for `install.sh` to run even if “upgrade mode” is already enabled to allow reruns in case of a previous run failure (RS77319)

- Added log messages to the `redis_mgr` process (RS77891), the job_scheduler process (RS82673), and the `install.sh` script (RS82673)

- Improved `rladmin` error messages for certificate validation (RS79933)

- Added internode encryption ports to command-line utility `rlcheck` validation (RS68965)

- Added an alert to notify when a node operation (such as maintenance mode) failed, aborted, or was canceled. The alert is enabled by default (RS76089)

### Resolved issues

- RS72866 - Improved performance for client connections which use TLS

- RS78241 - Fixed shard placement to always respect rack-zone restrictions and avoid a state where a primary (master) and replica are on the same rack, even if temporarily

- RS78144 - Removed the dependency on system-wide `ldconfig` so non-interactive processes will use their own dynamic libraries without impacting external services

- RS78028 - Fixed race condition during rolling upgrade that might result in shards repeatedly restarting

- RS77964 - Fixed module deletion to remove the old directory with the module

- RS75259 - Fixed node to prevent using plain text communication instead of TLS after losing connectivity

- RS69616 - Fixed validation for internode communication ports

- RS83535 - Fixed `sentinel_service` to start on RHEL 8 with DISA STIG profile 

- RS87191 - Fixed a cross slot error when using Redis on Flash with Replica Of, in case a key on the source database swapped from RAM to flash and expired while it was also part of Lua script execution

### Security

#### Open source Redis security fixes compatibility

As part of Redis's commitment to security, Redis Enterprise Software implements the latest [security fixes](https://github.com/redis/redis/releases) available with [open source Redis](https://github.com/redis/redis). The following open source Redis [CVEs](https://github.com/redis/redis/security/advisories) do not affect Redis Enterprise:

- [CVE-2021-32625](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32625) — Redis Enterprise is not impacted by the CVE that was found and fixed in open source Redis since Redis Enterprise does not implement LCS. Additional information about the open source Redis fix is on the [Redis GitHub page](https://github.com/redis/redis/releases) (Redis 6.2.4, Redis 6.0.14)

- [CVE-2021-32672](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32672) — Redis Enterprise is not impacted by the CVE that was found and fixed in open source Redis because the LUA debugger is unsupported in Redis Enterprise. Additional information about the open source Redis fix is on the [Redis GitHub page](https://github.com/redis/redis/releases) (Redis 6.2.6, Redis 6.0.16)

- [CVE-2021-32675](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32675) — Redis Enterprise is not impacted by the CVE that was found and fixed in open source Redis because the proxy in Redis Enterprise does not forward unauthenticated requests. Additional information about the open source Redis fix is on the [Redis GitHub page](https://github.com/redis/redis/releases) (Redis 6.2.6, Redis 6.0.16)

- [CVE-2021-32762](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32762) — Redis Enterprise is not impacted by the CVE that was found and fixed in open source Redis because the memory allocator used in Redis Enterprise is not vulnerable. Additional information about the open source Redis fix is on the [Redis GitHub page](https://github.com/redis/redis/releases) (Redis 6.2.6, Redis 6.0.16)

- [CVE-2021-41099](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-41099) — Redis Enterprise is not impacted by the CVE that was found and fixed in open source Redis because the `proto-max-bulk-len CONFIG` is blocked in Redis Enterprise. Additional information about the open source Redis fix is on the [Redis GitHub page](https://github.com/redis/redis/releases) (Redis 6.2.6, Redis 6.0.16)

Redis Enterprise has already included the fixes for the relevant CVEs. Some CVEs announced for open source Redis do not affect Redis Enterprise due to different and additional functionality available in Redis Enterprise that is not available in open source Redis.
